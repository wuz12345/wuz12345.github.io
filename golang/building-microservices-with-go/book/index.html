
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="wuzhuang">
      
      
        <meta name="author" content="wuzhuang">
      
      
        <link rel="canonical" href="https://wuz12345.github.io/golang/building-microservices-with-go/book/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.16">
    
    
      
        <title>3. Docker - wuzhuang</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.1c3799f8.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3-docker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="wuzhuang" class="md-header__button md-logo" aria-label="wuzhuang" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            wuzhuang
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3. Docker
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/wuz12345/mynote/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="wuzhuang" class="md-nav__button md-logo" aria-label="wuzhuang" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    wuzhuang
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/wuz12345/mynote/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        简介
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        关于
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          LearnC++
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="LearnC++" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          LearnC++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../LearnC%2B%2B/%E6%8B%B7%E8%B4%9D%E8%B5%8B%E5%80%BC/" class="md-nav__link">
        拷贝赋值
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Effiective Modern C++
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Effiective Modern C++" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Effiective Modern C++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../LearnC%2B%2B/Effective%20C%2B%2B/Item01/" class="md-nav__link">
        item1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../LearnC%2B%2B/Effective%20C%2B%2B/Item02/" class="md-nav__link">
        item2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../LearnC%2B%2B/Effective%20C%2B%2B/Item07/" class="md-nav__link">
        item7
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../LearnC%2B%2B/%E5%B7%A6%E5%80%BC%E4%B8%8E%E5%8F%B3%E5%80%BC/" class="md-nav__link">
        左值与右值
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          LeetCode刷题
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="LeetCode刷题" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          LeetCode刷题
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../LeetCode%20%E5%88%B7%E9%A2%98/Zigzag-Conversion/" class="md-nav__link">
        之字形转换
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../LeetCode%20%E5%88%B7%E9%A2%98/%E7%BA%BF%E6%80%A7%E8%A1%A8/" class="md-nav__link">
        线性表
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          有趣的知识
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="有趣的知识" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          有趣的知识
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%9F%A5%E8%AF%86/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA/" class="md-nav__link">
        正则表达式与有限状态机
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          webRTC
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="webRTC" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          webRTC
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../webrtc/FEC/FEC/" class="md-nav__link">
        FEC
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/wuz12345/mynote/edit/master/docs/golang/building-microservices-with-go/book.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="3-docker">3. Docker<a class="headerlink" href="#3-docker" title="Permanent link">&para;</a></h1>
<p>Containers are immutable instances of images, and the data volumes are by default non-persistent.</p>
<h1 id="4-testing">4. Testing<a class="headerlink" href="#4-testing" title="Permanent link">&para;</a></h1>
<p>use httptest</p>
<div class="highlight"><pre><span></span><code>func TestSearchHandler( t *testing.T) {
    handler := SearchHandler{}
    request := httptest.NewRequest(&quot;GET&quot;, &quot;/search&quot;, nil)
    response := httptest.NewRecorder()

    handler.ServeHTP(response, request)
    if response.Code != http.StatusBadRequest{
        t.Errorf(&quot;Expected BadRequest got %v&quot;, response.Code)
    }
}
// httptest generate Mock versions of the dependent objects http.Request and http.ResponseWriter
</code></pre></div>
<h3 id="dependency-injection-and-mocking">Dependency injection and mocking<a class="headerlink" href="#dependency-injection-and-mocking" title="Permanent link">&para;</a></h3>
<p>github.com/stretchr/testify</p>
<h3 id="code-coverage">Code coverage<a class="headerlink" href="#code-coverage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>go test -cover ./...
</code></pre></div>
<h3 id="behavioral-driven-developentbdd">Behavioral Driven Developent(BDD)<a class="headerlink" href="#behavioral-driven-developentbdd" title="Permanent link">&para;</a></h3>
<p>github.com/DATA-DOG/godog/cmd/godog</p>
<h3 id="testing-with-docker-compose">Testing with Docker Compose<a class="headerlink" href="#testing-with-docker-compose" title="Permanent link">&para;</a></h3>
<h3 id="benchmarking-and-profiling">Benchmarking and profiling<a class="headerlink" href="#benchmarking-and-profiling" title="Permanent link">&para;</a></h3>
<p>search_bench_test.go
go test -bench=. -benchmem</p>
<p>Go supports three different types of profiling:</p>
<ul>
<li>CPU, Identifies the tasks which require the most CPU time</li>
<li>Heap: Identifies the statements responsible for allocating the most memory</li>
<li>Blocking: Identifies the operations responsible for blocking Goroutines for the longest time</li>
</ul>
<p>Add it to the beginning of your main Go file and, if you are not already running an HTTP web server,
start one:</p>
<div class="highlight"><pre><span></span><code>import (
    &quot;log&quot;
    _ &quot;net/http/pprof&quot;
)

go func() {
    log.Println(http.ListenAndServe(&quot;localhost:6060&quot;, nil))
}
</code></pre></div>
<h1 id="5-commong-patterns">5. Commong Patterns<a class="headerlink" href="#5-commong-patterns" title="Permanent link">&para;</a></h1>
<h3 id="design-for-failure">Design for failure<a class="headerlink" href="#design-for-failure" title="Permanent link">&para;</a></h3>
<p>Anything that can go wrong will go wrong.
想象一个场景，你使用了同步方式调用第三方邮件发送API，某一天用户量因为打了广告大涨，结果却因为调用
邮件API的频率限制导致应用一直失败。</p>
<h3 id="patterns">Patterns<a class="headerlink" href="#patterns" title="Permanent link">&para;</a></h3>
<h5 id="event-processing">Event Processing<a class="headerlink" href="#event-processing" title="Permanent link">&para;</a></h5>
<p>The first question we should ask ourselves is &ldquo;Does this call need to be synchronous?&rdquo;</p>
<p>Event processing with at least once delivery.</p>
<h5 id="hanlding-errors">Hanlding Errors<a class="headerlink" href="#hanlding-errors" title="Permanent link">&para;</a></h5>
<p>Append the error every time we fail to process a message as it gives us the history of what went wrong.</p>
<h5 id="dead-letter-queue">Dead Letter Queue<a class="headerlink" href="#dead-letter-queue" title="Permanent link">&para;</a></h5>
<p>we can examine the failed messages on this queue to assist us with debugging the system</p>
<h5 id="idempotent-transactions-and-message-order">Idempotent transactions and message order<a class="headerlink" href="#idempotent-transactions-and-message-order" title="Permanent link">&para;</a></h5>
<h5 id="atomic-transactions">Atomic transactions<a class="headerlink" href="#atomic-transactions" title="Permanent link">&para;</a></h5>
<p>try to avoid distributed transactons. Use message queue, when somethiing fails, keep retrying</p>
<h5 id="timeouts">Timeouts<a class="headerlink" href="#timeouts" title="Permanent link">&para;</a></h5>
<p>The key feature of a timeout is to fail fast and to notify the caller of this failure.</p>
<div class="highlight"><pre><span></span><code>// github.com/eapache/go-resiliency/tree/master/deadline
func makeTimeoutRequest() {
    dl := deadline.New(1 * time.Second)
    err := dl.Run(func(stopper &lt;-chan struct{}) error {
        slowFunction()
        return nil
    })
    switch err {
    case deadline.ErrTimeOut:
        fmt.Println(&quot;Timeout&quot;)
    default:
        fmt.Println(err)
    }
}
</code></pre></div>
<h5 id="back-off">Back off<a class="headerlink" href="#back-off" title="Permanent link">&para;</a></h5>
<p>A backoff algorithm waits for a set period before retrying after the first failure, this then increments
with subsequent failures up to a maximum duration.</p>
<p>go-resiliency package and the retryier package</p>
<h5 id="circuit-breaking">Circuit breaking<a class="headerlink" href="#circuit-breaking" title="Permanent link">&para;</a></h5>
<p>Circuit breaking is all about failing fast, automatically degrade functionality when the system is under stress.</p>
<p>how it works:
Under normal operations, like a circuit breaker in your electricity switch box, the breaker is closed and traffic
flows normally. However, once the pre-determined error threshold has been exceeded, the breaker enters the open state,
and all requests immediately fail without even being attempted. After a period, a further request would be allowed
and the circuit enters a half-open state, in this state a failure immediately returns to the open state regardless
of the errorThreshold. Once some requests have been processed without any error, then the circuit again returns
to the closed state, and only if the number of failures exceeded the error threshold would the circuit open again.</p>
<p><img alt="" src="../circuit.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1">// go-resilience</span><span class="w"></span>

<span class="c1">// Threshold: number of times a request can fail before the circuit opens</span><span class="w"></span>
<span class="c1">// successThreshold: number of times that we need a successful reqeust in the half-open state before we move back to open</span><span class="w"></span>
<span class="c1">// timeout: the time that circuit will stay in the open state before chaning to half-open</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="nx">New</span><span class="w"> </span><span class="p">(</span><span class="kt">error</span><span class="w"> </span><span class="nx">Threshold</span><span class="p">,</span><span class="w"> </span><span class="nx">successThreshold</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">timeout</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">Breaker</span><span class="w"></span>
<span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;time&quot;</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">breaker</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">Run</span><span class="p">(</span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">// call some service</span><span class="w"></span>
<span class="w">            </span><span class="nx">time</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;Timeout&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">})</span><span class="w"></span>

<span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="kc">nil</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="c1">// success</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">breaker</span><span class="p">.</span><span class="nx">ErrBreadkerOpen</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="c1">// our function wasn&#39;t run because the breaker was open</span><span class="w"></span>
<span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;Breaker open&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="k">default</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nx">time</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="mi">500</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>One of more modern implementations of circuit breaking and timeouts is the Hystrix library from Netflix.</p>
<ul>
<li>github.com/Netflix/Hystrix</li>
<li>github.com/afex/hystrix-go</li>
</ul>
<h5 id="health-checks">Health checks<a class="headerlink" href="#health-checks" title="Permanent link">&para;</a></h5>
<p>Every services should expose a health check endpoint which can be accessed by the consul or another server monitor.
Recommend you look at implementing these features:</p>
<ul>
<li>Data store connections status(general connection state, connection pool status)</li>
<li>current response time (rolling average)</li>
<li>burrent connections</li>
<li>bad requests(running average)</li>
</ul>
<h5 id="throttling">Throttling (限流)<a class="headerlink" href="#throttling" title="Permanent link">&para;</a></h5>
<p>Throttling is a pattern where you restrict the number of connections that a service can handle,
returning an HTTP error code when this threshold has been exceeded.</p>
<h3 id="service-discovery">Service discovery<a class="headerlink" href="#service-discovery" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Microservices are easy, building microservice is hard</p>
</blockquote>
<p>The solution is service discovery and the use of a dynamic sevice registery, like Consul or Etcd.
There two main patterns for service discovery:</p>
<h5 id="server-side-service-discovery">server-side service discovery<a class="headerlink" href="#server-side-service-discovery" title="Permanent link">&para;</a></h5>
<p>typically, there will be a resverse proxy which acts as a gateway to your services, it contains the dynamic
service registry and forwards your request on to the backend services.
The reverse proxy my become a bottleneck.</p>
<h5 id="client-side-service-discovery">client-side service discovery<a class="headerlink" href="#client-side-service-discovery" title="Permanent link">&para;</a></h5>
<p>Prefer client-side, this gives you greater control over what happens when a failure occurs.
Client is responsible for the service discovery and load balancing.</p>
<h5 id="load-balancing">Load balancing<a class="headerlink" href="#load-balancing" title="Permanent link">&para;</a></h5>
<p>Implement in Go</p>
<p><code>func NewLoadBalancer(strategy Strategy, endpoints []url.URL) * loadBalancer</code></p>
<h3 id="caching">Caching<a class="headerlink" href="#caching" title="Permanent link">&para;</a></h3>
<p>you should be talking about consistency and the tradeoffs with performance and cost.</p>
<h1 id="6-microservices-frameworks">6. Microservices Frameworks<a class="headerlink" href="#6-microservices-frameworks" title="Permanent link">&para;</a></h1>
<h3 id="what-makes-a-good-microservice-frameworkds">What makes a good microservice Frameworkds<a class="headerlink" href="#what-makes-a-good-microservice-frameworkds" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../microservice.png" /></p>
<h3 id="micro">Micro<a class="headerlink" href="#micro" title="Permanent link">&para;</a></h3>
<p>github.com/micro/go-micro</p>
<ul>
<li>Tooling (CI/CD, cross platform):  protoc</li>
<li>Maintainable: verion</li>
<li>Format(REST/RPC): use googles Protocol Buffers</li>
<li>Patterns: most have been implemented in Micro and many more are avaiable as plugins.</li>
<li>Language independence: proto buffer support</li>
<li>Ability to interface with other frameworks:</li>
<li>Efficiency:</li>
<li>Quality: very high with automated builds</li>
</ul>
<h3 id="kite">Kite<a class="headerlink" href="#kite" title="Permanent link">&para;</a></h3>
<p>go get github.com/koding/kite</p>
<h3 id="grpc">gRPC<a class="headerlink" href="#grpc" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>$ go get google.golang.org/grpc
$ go get -u github.com/golang/protobuf/{proto,protoc-gen-go}
</code></pre></div>
<h1 id="7-logging-and-montoring">7. Logging and Montoring<a class="headerlink" href="#7-logging-and-montoring" title="Permanent link">&para;</a></h1>
<p>stack traces and other application outout which helps you diagnose a problem can be broken down into three categories:</p>
<ul>
<li>Metrics: such as time series data(for example, transaction or individual component timings)</li>
<li>Text-based logs: such as Nginx or text log from your application software</li>
<li>Exceptions</li>
</ul>
<h3 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h3>
<p>time-series database using a unique key as an identifier</p>
<p>Types of data best represented by metrics: it is the data that is meaningful when expressed by simple numbers,
such as request timings and counts.</p>
<h5 id="name-convertions">Name convertions (命名惯例)<a class="headerlink" href="#name-convertions" title="Permanent link">&para;</a></h5>
<p>良好一致性的设计允许我们使用通配符过滤。statsd</p>
<h5 id="saassoftware-as-a-service-datadog">Saas(software as a service): Datadog<a class="headerlink" href="#saassoftware-as-a-service-datadog" title="Permanent link">&para;</a></h5>
<h5 id="self-hosted">Self-hosted:<a class="headerlink" href="#self-hosted" title="Permanent link">&para;</a></h5>
<p>There are many options for backend data stores such as Graphite, Prometheus, InfluxDB, ElasticSearch.
However, when it comes to graphing, Grafana leads the way.</p>
<h5 id="graafana">Graafana<a class="headerlink" href="#graafana" title="Permanent link">&para;</a></h5>
<p>Display metrics</p>
<h3 id="logging">Logging<a class="headerlink" href="#logging" title="Permanent link">&para;</a></h3>
<h5 id="distributed-tracing-with-correlation-ids">Distributed tracing with correlation IDs<a class="headerlink" href="#distributed-tracing-with-correlation-ids" title="Permanent link">&para;</a></h5>
<p>zipkin is a distributed tracing system designed to trouble shoot latency.</p>
<h5 id="elk-elasticsearch-logstash-and-kibana">ELK (Elasticsearch, Logstash, and Kibana)<a class="headerlink" href="#elk-elasticsearch-logstash-and-kibana" title="Permanent link">&para;</a></h5>
<ul>
<li>Elasticsearch: databastore for logging data</li>
<li>Logstash: is used for reading the data from your application logs and storing it in ElasticSearch</li>
<li>Kibana: use for query data</li>
</ul>
<h3 id="exceptions">Exceptions<a class="headerlink" href="#exceptions" title="Permanent link">&para;</a></h3>
<p>Go has two great methods for handling unexpected errors:</p>
<h5 id="panic">panic<a class="headerlink" href="#panic" title="Permanent link">&para;</a></h5>
<p><code>func panic(v interface{})</code>, built-in panic stops normal execution of the current goroutine,
All the defered functions are run in the normal way then the program is terminated.</p>
<h5 id="recover">recover<a class="headerlink" href="#recover" title="Permanent link">&para;</a></h5>
<p>The recover function allows to manage the behavior of a panicking goroutine.
When called inside a deferred function, recover stops the execution of the panic and returns the error passed to the
call of panic.</p>
<p><code>func recover() interface{}</code></p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">panicHandler</span><span class="p">)</span><span class="w"> </span><span class="nx">ServeHTTP</span><span class="p">(</span><span class="nx">rw</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">recover</span><span class="p">();</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">p</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">WithFields</span><span class="p">(</span><span class="w"></span>
<span class="w">                </span><span class="nx">logrus</span><span class="p">.</span><span class="nx">Fields</span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="s">&quot;handler&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;panic&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="s">&quot;status&quot;</span><span class="p">:</span><span class="w">  </span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusInternalServerError</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="s">&quot;method&quot;</span><span class="p">:</span><span class="w">  </span><span class="nx">r</span><span class="p">.</span><span class="nx">Method</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="s">&quot;path&quot;</span><span class="p">:</span><span class="w">    </span><span class="nx">r</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="s">&quot;query&quot;</span><span class="p">:</span><span class="w">   </span><span class="nx">r</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">RawQuery</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="p">).</span><span class="nx">Error</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;Error: %v\n%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="p">.</span><span class="nx">Stack</span><span class="p">()))</span><span class="w"></span>
<span class="w">            </span><span class="c1">// runtime/debug returns a formatted stack trace of the goroutine that calls it</span><span class="w"></span>
<span class="w">            </span><span class="nx">rw</span><span class="p">.</span><span class="nx">WriteHeader</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusInternalServerError</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}()</span><span class="w"></span>

<span class="w">    </span><span class="nx">p</span><span class="p">.</span><span class="nx">next</span><span class="p">.</span><span class="nx">ServeHTTP</span><span class="p">(</span><span class="nx">rw</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="8-security">8. Security<a class="headerlink" href="#8-security" title="Permanent link">&para;</a></h1>
<h3 id="encryption-and-signing">Encryption and signing<a class="headerlink" href="#encryption-and-signing" title="Permanent link">&para;</a></h3>
<h5 id="symmetric-key-encryption">Symmetric-key encryption<a class="headerlink" href="#symmetric-key-encryption" title="Permanent link">&para;</a></h5>
<p>one key is used for both the encryption and desryption.</p>
<h5 id="public-key-cryptography-asynmmetric-encryption">Public-key cryptography (asynmmetric encryption)<a class="headerlink" href="#public-key-cryptography-asynmmetric-encryption" title="Permanent link">&para;</a></h5>
<p>both sides requiring to know the secret.</p>
<p>The public key is used for encrypting information while the private can only be used for decrypting.</p>
<h5 id="digital-signatures">Digital signatures<a class="headerlink" href="#digital-signatures" title="Permanent link">&para;</a></h5>
<p>A digital signature works by encrypting a message with a private key and then transferring the signed message.</p>
<h5 id="x509-digital-certificates">X.509 digital certificates<a class="headerlink" href="#x509-digital-certificates" title="Permanent link">&para;</a></h5>
<p>man-in-the-middle-attack</p>
<p>A digital certificate contains three things:</p>
<ul>
<li>A public key</li>
<li>Certificate information such as the owner&rsquo;s name of ID</li>
<li>One or more digital signatures</li>
</ul>
<h5 id="tlsssl">TLS/SSL<a class="headerlink" href="#tlsssl" title="Permanent link">&para;</a></h5>
<p>TLS works using symmetrical encryption, where the client and the server both have a key which is used for encryption and decryption. If you remember the previous section, we introduced symmetrical encryption and the problems of distributing keys. TLS gets around this problem by using asymmetrical encryption in the first part of the handshake. The client retrieves the certificate containing the public key from the server and generates a random number; it uses the public key to encrypt this random number and sends it back to the server. Now that both parties have the random number, they use this to generate symmetrical keys which are used for encrypting and decrypting the data over the transport.</p>
<h3 id="external-security">External security<a class="headerlink" href="#external-security" title="Permanent link">&para;</a></h3>
<ul>
<li>Layer 2 or 3 firewalls</li>
<li>Web application firewall(WAF), Cloudflare supports OWASP CRS</li>
<li>API Gateway<ul>
<li>Request validation</li>
<li>Authorization</li>
<li>Rate limiting</li>
<li>Logging</li>
<li>Caching</li>
<li>Request and response transformations</li>
</ul>
</li>
<li>DDoS protection<ul>
<li>UDP fragment: creating datagrams which contain fake packets, when server attempts to reassemble packets, it is unable to do so and the resources are quickly overwhelmed</li>
<li>UDP flood: sending a flood of UDP packets with a spoofed source address to an IP address</li>
<li>DNS: A DNS attack utilizes a UDP flood to take out a DNS server.</li>
<li>NTP: is another amplification attach which takes advantage of a feature built into NTP servers</li>
<li>Chargen: character generation protocol</li>
<li>SYN flood: a classic DDoS attack that sends a lot of packets to a machine</li>
<li>SSDP: simple services discovery protocol</li>
<li>ACK: firewall; network scrubbing filters</li>
</ul>
</li>
</ul>
<h3 id="application-sercurity">Application sercurity<a class="headerlink" href="#application-sercurity" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Prevention</p>
<ul>
<li>secure communication</li>
<li>authorization</li>
<li>authentication</li>
</ul>
</li>
<li>
<p>Detection: applications logs</p>
</li>
<li>
<p>Response</p>
</li>
<li>
<p>Recovery: well backed up and aotomated</p>
</li>
<li>
<p>input validation: github.com/go-playground/validator</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>package validation

import (
    &quot;encoding/json&quot;
    &quot;net/http&quot;

    validator &quot;gopkg.in/go-playground/validator.v9&quot;
)

// Request defines the input structure received by a http handler
type Request struct {
    Name  string `json:&quot;name&quot;`
    Email string `json:&quot;email&quot; validate:&quot;email&quot;`
    URL   string `json:&quot;url&quot; validate:&quot;url&quot;`
}

var validate = validator.New()

func Handler(rw http.ResponseWriter, r *http.Request) {
    request := Request{}

    err := json.NewEncoder(rw).Encode(&amp;request)
    if err != nil {
        http.Error(rw, &quot;Invalid request object&quot;, http.StatusBadRequest)
        return
    }

    err = validate.Struct(request)
    if err != nil {
        http.Error(rw, err.Error(), http.StatusBadRequest)
        return
    }

    rw.WriteHeader(http.StatusOK)
}
</code></pre></div>
<ul>
<li>
<p>Fuzzing : github.com/dvyukov/go-fuzz/go-fuzz  generating random input</p>
</li>
<li>
<p>TLS:</p>
</li>
<li>
<p>Securing data at rest : encrypt data in the database</p>
</li>
<li>
<p>Physical machine access</p>
</li>
<li>
<p>OWASP: REST Security Cheat Sheet (<a href="https://www.owasp.org/index.php/REST">https://www.owasp.org/index.php/REST</a>_Security_Cheat_Sheet).</p>
<ul>
<li>Never storing session tokens in a URL, use cookie or a post value (url can query in log)</li>
<li>XSS and CSRF.</li>
<li>Insecure direct object references. Checking authenticated users can modify the object in the request</li>
</ul>
</li>
<li>
<p>Password Hashing, hash is one-way cryptography</p>
<ul>
<li>Adding a salt and a pepper. （加盐是一种常见的方式，防止被彩虹表暴力破解）</li>
<li>bcrypt: golang.org/x/crypto/bcrypt</li>
</ul>
</li>
</ul>
<h3 id="maintenance">Maintenance<a class="headerlink" href="#maintenance" title="Permanent link">&para;</a></h3>
<ul>
<li>Patching containers: run a regular build and deploy even if the application code does not change</li>
<li>Software upadtes:</li>
<li>Patching application code</li>
<li>Logging<ul>
<li>Who is preforming the action</li>
<li>what has failed or succeed</li>
<li>when is the action occurring</li>
<li>why this has failed or succeeded</li>
<li>how you can deal with the issue</li>
</ul>
</li>
</ul>
<h1 id="9-event-driven-architecture">9. Event-Driven Architecture<a class="headerlink" href="#9-event-driven-architecture" title="Permanent link">&para;</a></h1>
<h3 id="differences-between-synchronous-and-asynchronous-processing">Differences between synchronous and asynchronous processing<a class="headerlink" href="#differences-between-synchronous-and-asynchronous-processing" title="Permanent link">&para;</a></h3>
<ul>
<li>synchronous: easier to understand, write, debug</li>
<li>asynchronous: decoupling, scale, bath processing, time-based processing</li>
</ul>
<p><img alt="" src="../async.png" /></p>
<h3 id="types-of-asynchronous-messages">Types of asynchronous messages<a class="headerlink" href="#types-of-asynchronous-messages" title="Permanent link">&para;</a></h3>
<ul>
<li>Pull/queue messaging</li>
</ul>
<p>May have a worker process running, read from the queue retrieving the messages one by one, perform the required work,
then delete the message from the queue.
Often there is also a queue commonly called a &ldquo;dead letter queue&rdquo; should the worker process fail for any reason then
the message would be added to the dead letter queue.</p>
<p><img alt="" src="../pull.png" /></p>
<ul>
<li>Push messaging</li>
</ul>
<p><img alt="" src="../push.png" /></p>
<p>NATS.io</p>
<p>github.com/nats-io/go-nats</p>
<h3 id="domain-driven-design">Domain-Driven Design<a class="headerlink" href="#domain-driven-design" title="Permanent link">&para;</a></h3>
<p>Anatomy of DDD:</p>
<ul>
<li>Straegic design</li>
<li>Tactical design</li>
<li>Ubiquitous language</li>
<li>Bounded Contexts</li>
<li>Context Mapping</li>
</ul>
<h3 id="sofware">Sofware<a class="headerlink" href="#sofware" title="Permanent link">&para;</a></h3>
<ul>
<li>Kafka : is a distributed streaming platform allows you to publish and subscribe to streams of records</li>
<li>NATS.io: open source messaging system written in Go. Can perform at-most-once and at-least-once delivery</li>
<li>AWS SNS/SQS</li>
<li>Google Cloud Pub/Sub</li>
</ul>
<h1 id="10-continuous-delivery">10. Continuous Delivery<a class="headerlink" href="#10-continuous-delivery" title="Permanent link">&para;</a></h1>
<h3 id="what-is-continuous-delivery">What is Continuous Delivery?<a class="headerlink" href="#what-is-continuous-delivery" title="Permanent link">&para;</a></h3>
<p>Aspects of continuous delivery</p>
<ul>
<li>Reproducibility and easy setup</li>
<li>Artifact storage</li>
<li>Automation of tests</li>
<li>Automation of integration tests</li>
<li>Infrastructure as code</li>
<li>Security scanning</li>
<li>Static code analysis</li>
<li>Smoke testing</li>
<li>End 2 end testing</li>
<li>Monitoring - track deployments in metrics</li>
</ul>
<p>What does Go bring as a language which helps us with this? Now, let&rsquo;s look at the process:</p>
<ul>
<li>Build</li>
<li>Test</li>
<li>Package</li>
<li>Integration test</li>
<li>Benchmark test</li>
<li>Security test</li>
<li>Provision production</li>
<li>Smoke test</li>
<li>Monitor</li>
</ul>
<h3 id="what-is-container-orchestration">What is container orchestration ?<a class="headerlink" href="#what-is-container-orchestration" title="Permanent link">&para;</a></h3>
<ul>
<li>Managed, such as PasS solutions like AWS ECS</li>
<li>Unmanaged, like Kubenetes</li>
</ul>
<h3 id="what-is-immutable-infrastructure">What is immutable infrastructure?<a class="headerlink" href="#what-is-immutable-infrastructure" title="Permanent link">&para;</a></h3>
<h3 id="terraform">Terraform<a class="headerlink" href="#terraform" title="Permanent link">&para;</a></h3>
<p><a href="https://terraform.io">https://terraform.io</a>, which enables the provisioning of infrastructure for several applications and cloud providers.</p>
<h3 id="continuous-delivery-workflow">Continuous delivery workflow<a class="headerlink" href="#continuous-delivery-workflow" title="Permanent link">&para;</a></h3>
<ul>
<li>Compile application</li>
<li>Unit test</li>
<li>Benchmark</li>
<li>Static code analysis: megacheck, safesql</li>
<li>Integration test</li>
<li>Build Docker image</li>
<li>Deploy application</li>
<li>Smoke test</li>
<li>Monitoring/Alerting</li>
</ul>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.3a4b43e5.min.js"></script>
      
        <script src="../../../js/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>